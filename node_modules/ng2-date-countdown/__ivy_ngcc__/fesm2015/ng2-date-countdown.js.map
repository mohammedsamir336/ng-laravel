{"version":3,"file":"ng2-date-countdown.js","sources":["ng:/ng2-date-countdown/src/countdown.ts","ng:/ng2-date-countdown/src/countdown.module.ts","ng:/ng2-date-countdown/ng2-date-countdown.ts"],"names":["tslib_1.__decorate"],"mappings":"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","sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'countdown',\n  templateUrl: 'countdown.html',\n  styleUrls: ['countdown.scss']\n})\n\nexport class CountDown {\n  @Input() units: any;\n  @Input() end: any;\n  @Input() displayString: String = '';\n  @Input() text: any;\n  @Input() divider: any;\n  @Input() showZero: Boolean = false;\n  @Output() reached: EventEmitter<Date> = new EventEmitter();\n  display: any = [];\n  displayNumbers: any = [];\n  wasReached: Boolean = false;\n\n  constructor() {\n    setInterval(() => this._displayString(), 100);\n  }\n\n  _displayString() {\n\n    if (this.wasReached)\n      return;\n\n    if (typeof this.units === 'string') {\n      this.units = this.units.split('|');\n    }\n\n    let givenDate: any = new Date(this.end);\n    let now: any = new Date();\n    let dateDifference: any = givenDate - now;\n\n    if ((dateDifference < 100 && dateDifference > 0) || dateDifference < 0 && !this.wasReached) {\n      this.wasReached = true;\n      this.reached.next(now);\n    }\n\n    let lastUnit = this.units[this.units.length - 1],\n      unitConstantForMillisecs = {\n        year: (((1000 * 60 * 60 * 24 * 7) * 4) * 12),\n        month: ((1000 * 60 * 60 * 24 * 7) * 4),\n        weeks: (1000 * 60 * 60 * 24 * 7),\n        days: (1000 * 60 * 60 * 24),\n        hours: (1000 * 60 * 60),\n        minutes: (1000 * 60),\n        seconds: 1000\n      },\n      unitsLeft = {},\n      returnText = '',\n      returnNumbers = '',\n      totalMillisecsLeft = dateDifference,\n      i,\n      unit: any;\n\n    for (i in this.units) {\n      if (this.units.hasOwnProperty(i)) {\n\n        unit = this.units[i].trim();\n        if (unitConstantForMillisecs[unit.toLowerCase()] === false) {\n          //$interval.cancel(countDownInterval);\n          throw new Error('Cannot repeat unit: ' + unit);\n\n        }\n        if (unitConstantForMillisecs.hasOwnProperty(unit.toLowerCase()) === false) {\n          throw new Error('Unit: ' + unit + ' is not supported. Please use following units: year, month, weeks, days, hours, minutes, seconds, milliseconds');\n        }\n\n        // If it was reached, everything is zero\n        unitsLeft[unit] = (this.wasReached) ? 0 : totalMillisecsLeft / unitConstantForMillisecs[unit.toLowerCase()];\n\n        if (lastUnit === unit) {\n          unitsLeft[unit] = Math.ceil(unitsLeft[unit]);\n        } else {\n          unitsLeft[unit] = Math.floor(unitsLeft[unit]);\n        }\n\n        totalMillisecsLeft -= unitsLeft[unit] * unitConstantForMillisecs[unit.toLowerCase()];\n        unitConstantForMillisecs[unit.toLowerCase()] = false;\n\n        // If it's less than 0, round to 0\n        unitsLeft[unit] = (unitsLeft[unit] > 0) ? unitsLeft[unit] : 0;\n\n        returnNumbers += ' ' + unitsLeft[unit] + ' | ';\n        returnText += ' ' + unit;\n      }\n    }\n\n    if (this.text === null || !this.text) {\n      this.text = {\n        Year: 'Year',\n        Month: 'Month',\n        Weeks: 'Weeks',\n        Days: 'Days',\n        Hours: 'Hours',\n        Minutes: 'Minutes',\n        Seconds: 'Seconds',\n        MilliSeconds: 'Milliseconds'\n      };\n    }\n\n    this.displayString = returnText\n      .replace('Year', this.text.Year + ' | ')\n      .replace('Month', this.text.Month + ' | ')\n      .replace('Weeks', this.text.Weeks + ' | ')\n      .replace('Days', this.text.Days + ' | ')\n      .replace('Hours', this.text.Hours + ' | ')\n      .replace('Minutes', this.text.Minutes + ' | ')\n      .replace('Seconds', this.text.Seconds);\n\n    this.displayNumbers = returnNumbers.split('|');\n    this.display = this.displayString.split('|');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CountDown } from './countdown';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    CountDown\n  ],\n  exports: [\n    CountDown\n  ]\n})\nexport class CountdownModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"]}